<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>ImageApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body>
<header class="topbar">
    <div class="container">
        <a class="brand" href="/">ImageApp</a>

        <form method="get" action="/" class="search">
            <input name="q" value="@((string)ViewBag.Query ?? "")" placeholder="Search..." />
            <button type="submit">Search</button>
        </form>

        <div class="nav">
            @if (User.Identity?.IsAuthenticated == true)
            {
                @if (User.IsInRole("Creator") || User.IsInRole("Admin"))
                {
                    <a href="/Creator/Upload">Upload</a>
                }
                
                <span>Hello, @User.Identity.Name</span>
                <form method="post" action="/Auth/Logout">
                    <button type="submit">Logout</button>
                </form>
            }
            else
            {
                <a href="/Auth/Login">Login</a>
                <a href="/Auth/Register">Register</a>
            }
        </div>
    </div>
</header>

<main class="container">
    @RenderBody()
</main>

@await RenderSectionAsync("Scripts", required: false)

</body>
</html>
